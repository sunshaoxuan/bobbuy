---
引用: PROD-02-业务功能详细说明
状态: 草案
生效日期: 2026-01-13
---

# ARCH-09: 多语言与 AI 翻译引擎详细设计

## 1. 模块概述
本模块旨在解决全球委托任务平台中的沟通与信息壁垒。设计分为两层：解耦 UI 标识的 **系统多语 (System I18n)** 和通过 AI 动态生成的 **数据多语 (Data I18n)**。

## 2. 系统多语 (System I18n)
### 2.1 资源管理
-   **范围**：UI 标签、错误提示、按钮文案、菜单名。
-   **实现方式**：
    -   前端使用标准的 I18n 库（如 `react-i18next`），后端使用 Spring 的 `MessageSource`。
    -   系统预置多语言包（JSON/Properties 格式），包含：简体中文、日文、英文、泰文、繁体中文等。
-   **开发规范**：严禁在代码中硬编码任何提示文字。

## 3. 数据多语 (Data I18n) 与 AI 翻译引擎
针对商品信息、IM 聊天记录等动态内容，系统提供基于大模型 (LLM) 的实时翻译能力。

### 3.1 翻译流逻辑 (AI-Engine Workflow)
1.  **翻译请求触发**：系统收到一段未知语种或目标语种缺失的数据字串。
2.  **HASH 匹配 (Cache Check)**：
    -   计算待翻译文本的 HASH 值。
    -   在持久化翻译缓存库（HASH 缓存）中查找：`{Text_Hash}:{Target_Language}`。
    -   **命中**：直接返回已缓存的翻译结果。
3.  **AI 翻译 (LLM Call)**：
    -   **未命中**：将原文送入大模型翻译微服务。
    -   **处理**：利用 MLLM 解析上下文（Context-aware）进行高保真翻译。
4.  **持久化存储**：将新翻译结果写入 HASH 缓存库，供后续复用。

### 3.2 商家自服务设置
-   **翻译服务开关**：商家可自行在设置中开启“自动 AI 翻译”。
-   **语种偏好**：预设其习惯的主语言。例如：日本商家开启后，其收到的中文 IM 信息将自动在界面下方显示日文翻译。

## 4. 技术实现建议
-   **缓存设计**：
    -   **层级**：Redis (热点缓存) + PostgreSQL `i18n_data_cache` 表 (持久化存储)。
    -   **HASH 算法**：建议使用 `SHA-256`。
-   **异步解耦**：非阻塞式的翻译建议使用消息队列 (Kafka) 进行异步分发，UI 端通过 WebSocket 实时推送翻译结果。

## 5. 交互布局建议
-   **翻译折叠**：在 IM 聊天气泡或商品详情下方，默认显示原文，提供微小的“一键翻译”图标或在开启自动服务时直接在原文下方显示灰色斜体的译文。
