---
引用: PROD-02-业务功能详细说明
状态: 草案
生效日期: 2026-01-13
---

# ARCH-04: 客户快速创建与管理详细设计

## 1. 模块概述
为了应对代购现场及沟通中随时出现的“新客户”场景，本模块提供了一种高优先级的全局快速录入机制。通过 AI 语义解析实现非标地址的标准化，并建立严密的身份识别体系。

## 2. 身份识别体系 (Identity Framework)
系统为每个客户维护三层标识：
1.  **物理 ID (System ID)**：
    -   格式：UUID / 内部 18 位长整形。
    -   特性：系统自动生成，物理唯一，**绝对不可更改**。
2.  **登录编码 (Login Identity)**：
    -   用于客户登录系统的凭证（如：L20261001）。
    -   可与手机号/邮箱绑定。
3.  **昵称/系统代号 (Business Nickname)**：
    -   商家在业务流中使用的“唯一叫法”（如：“大阪王阿姨”、“小红书-静静”）。
    -   在特定商家范围内必须唯一。

## 3. 客户快速创建流程
### 3.1 全局快速入口
-   **UI 设计**：在商家端的“订单确认”页与“采购执行”页，均在显眼位置置顶一个“快速新增客户”悬浮按钮或快捷键。
-   **交互**：点击后弹出精简的 Modal 对话框，不中断当前业务主流程。

### 3.2 录入字段
-   必填：昵称/代号。
-   选填：手机（预留）、邮箱（预留）、原始住所描述。

## 4. AI 地址标准化 (AI Address Normalization)
### 4.1 核心逻辑
传统地址录入要求用户按“省-市-区-街道”逐级选择，体验较差。本项目采用 **AI 自由格式填充**：
-   **输入**：商家或客户粘贴的原始地址字符串（例如：“日本東京都世田谷区北沢2-10-15 4F，靠近地铁站那个”）。
-   **AI 处理 (LLM 介入)**：
    -   提取：国家、邮编、都道府县、市区町村、番地、楼栋室号。
    -   清洗：去除“靠近地铁站”等非结构化辅助说明（转入备注栏）。
-   **输出**：标准化的 Schema 数据。支持以后续对接物流系统。

### 4.2 商家确认
AI 处理后，在 UI 上实时呈现分级布局预览，商家点击“确认无误”后完成入库。

## 5. 跨模块联动
-   **采集点**：采购执行中发现新客户代购需求 -> 点击 ARCH-04 入口 -> 快速创建客户 -> 立即分配至 ARCH-02 (订单确认) -> 关联当前采购行程。
-   **持久化**：新客户创建后，系统自动生成对应的“客户画像”，支持历史订单回溯。

## 6. 技术实现要点
-   **数据库映射**：使用逻辑模型描述，详见后续设计文档。
-   **AI 接口**：调用封装好的 LLM 地址清洗微服务。
-   **前端**：React 状态保持，确保弹出新增 Modal 时，下层的采购或识别数据不丢失。
