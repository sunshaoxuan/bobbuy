# PLAN-01: 下一阶段开发任务规划

**生效日期**: 2026-01-15
**状态**: 草案

---

## 1. 目标与范围

- **目标**：在保持流水线可编译成功的前提下，推进下一阶段 MVP 能力（订单流转、行程管理增强、参与者认证与基础风控）的前后端落地。
- **范围**：围绕“行程发布 → 订单确认 → 采购执行 → 结算完成”的核心链路，补齐数据模型、API 规范、前端表单交互与状态可视化。
- **约束**：严格遵守 STD-01/STD-02/STD-03/STD-04/STD-08，任何新增模块必须包含必要的文档与测试占位说明。

## 2. 迭代节奏

- **Sprint 1（基础功能完备）**：1 周
- **Sprint 2（流程闭环与可观测）**：1 周
- **Sprint 3（质量与验收）**：1 周

## 3. 后端开发任务拆解

### 3.1 Sprint 1（基础功能完备）

1. **数据模型增强**
   - 增加订单生命周期字段与状态更新时间
   - 增加行程容量与剩余容量计算逻辑
   - 引入基础费用字段（服务费、预计税费、货币类型）
2. **API 设计与实现**
   - 新增订单状态流转接口（确认/采购/交付/结算）
   - 新增行程可用容量校验与锁定接口
   - 指标接口补充：按状态统计订单数量
3. **校验与错误码**
   - 定义统一错误响应结构
   - 增加参数校验与状态校验错误提示

### 3.2 Sprint 2（流程闭环与可观测）

1. **基础审计日志**
   - 记录订单状态变化日志
   - 记录行程状态变化日志
2. **可观测性**
   - 增加轻量级健康与版本信息接口
   - 关键 API 统一日志字段输出

### 3.3 Sprint 3（质量与验收）

1. **测试用例补齐**
   - 编写单元测试与接口测试占位
2. **性能与异常场景**
   - 模拟并记录高频下单与并发更新的处理结果

## 4. 前端开发任务拆解

### 4.1 Sprint 1（基础功能完备）

1. **表单完善**
   - 行程创建表单补充日期、容量、状态
   - 订单创建表单补充服务费与币种
2. **状态可视化**
   - 订单状态标签统一映射
   - 行程状态标签统一映射
3. **数据校验提示**
   - 表单必填与范围校验
   - 关键字段展示说明

### 4.2 Sprint 2（流程闭环与可观测）

1. **流程动作按钮**
   - 订单状态流转按钮
   - 行程状态变更入口
2. **日志与提醒**
   - 订单状态变更记录展示
   - 异常提醒与空态引导

### 4.3 Sprint 3（质量与验收）

1. **端到端验收列表**
   - MVP 核心链路操作清单
2. **视觉一致性检查**
   - 统一间距、字体与色彩基线

## 5. 前后端分工建议

- **后端负责**：数据模型、API、校验、日志与指标接口。
- **前端负责**：界面交互、表单校验、状态可视化、日志呈现。
- **共同负责**：接口字段定义、错误码对齐、验收清单维护。

## 6. 流水线与质量保障

- 每次合并前必须保证 `frontend-build` 与 `backend-build` 绿灯。
- 所有新增文档必须遵循 STD-02 命名与编号规则。
- 任何跨文档引用需同步更新 README 索引（如涉及新增入口）。

## 7. 风险与应对

- **依赖下载受限**：提前准备离线依赖缓存或替代镜像方案。
- **接口变更频繁**：使用统一字段清单与变更记录表。
- **前后端进度不一致**：每日同步一次 API 状态与阻塞项。

## 8. 交付物清单

- API 设计与更新说明
- 前端页面与交互实现
- 测试计划与验收清单
- 流水线状态截图与说明
