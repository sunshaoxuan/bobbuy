# TC-ORDER-001: 多语需求智能解析与匹配用例

## 1. 测试背景
验证系统在面对极度模糊、多语言、非标准化的输入时，能否通过 AI Agent 协作链路（解析-审计-匹配-搜索-暂存）正确生成订单意向。

## 2. 输入数据 (Scenario Input)
> **输入文本**:
> "我想买车厘子，箱子装的2公斤的，能抢到的话最少2箱。还有Cheese cake，还有绿茶口味的马粪蛋糕，另外还有Tomato，ほれんそ和業務用冷冻草莓一袋。"

## 3. 期望交付物 (Expected Outputs)

### 3.1 语义解析结果 (Parsing & Audit JSON)
| 原始项 | 解析名称 | 规格 | 数量 | 优先级/约束 |
| :--- | :--- | :--- | :--- | :--- |
| 车厘子 | 车厘子 | 2kg/箱 | >= 2 | "能抢到的话最少2箱" (Limit: 2) |
| Cheese cake | 起司蛋糕 | - | 1 | - |
| 绿茶口味的马粪蛋糕 | 抹茶玛芬蛋糕 | - | 1 | - |
| Tomato | 番茄 | - | 1 | - |
| ほれんそ | 菠菜 | - | 1 | - |
| 業務用冷冻草莓 | 业务用冷冻草莓 | 一袋 | 1 | - |

### 3.2 智能匹配与暂存逻辑
1.  **车厘子**：
    -   *本地匹配*：若库中存在“Cherry 2kg Box”，自动关联图片。
2.  **绿茶口味的马粪蛋糕**：
    -   *语义联想*：匹配本地库中分类为 "Bakery" 下的 "Matcha Muffin"。
3.  **ほれんそ**：
    -   *多语处理*：自动翻译为“菠菜”，并匹配本地生鲜库。
4.  **業務用冷冻草莓**：
    -   *外部加速*：若库中无对应“业务用”型号，启动 **Search Agent**。
    -   *暂存处理*：搜索到类似包装后，放入 **“意向暂存库”**。

## 4. 验证步骤
1.  **输入模拟**：将上述文本输入 API 接口。
2.  **解析审计校验**：检查返回的 JSON 是否包含“最少2箱”这一关键限制。
3.  **匹配路径校验**：
    -   验证已存在商品是否自动挂载官方 ID。
    -   验证未知商品（冷冻草莓）是否正确进入 `transient_store`。
4.  **核销验证**：模拟商家在卖场确认草莓规格后，检查暂存记录是否成功核销为正式 SKU。

## 5. 备注 (Experience Bank)
本次测试产生的“马粪蛋糕 -> 抹茶玛芬”映射应自动存入向量经验库，后续再次输入“马粪蛋糕”时应实现秒级本地匹配。
